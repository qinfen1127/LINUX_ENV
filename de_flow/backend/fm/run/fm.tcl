#---------------------------------------------------------------------
#  author   : hr_li
#  data     : 2020/3/1
#  function : run fm script
#---------------------------------------------------------------------

#---------------------------------------------------------------------------------------------------
# set env
#---------------------------------------------------------------------------------------------------
set NET_PATH     ../../out

#---------------------------------------------------------------------------------------------------
# source files
#---------------------------------------------------------------------------------------------------
source ../../scr/rtl.tcl
source ../../scr/lib.tcl

#---------------------------------------------------------------------------------------------------
# read svf file
#---------------------------------------------------------------------------------------------------
set_svf -append  [list $NET_PATH/$RTL_TOP_FILE.svf]

#---------------------------------------------------------------------------------------------------
# set include path
#---------------------------------------------------------------------------------------------------
set search_path  [list $INC_PATH $LIB_PATH ]

#---------------------------------------------------------------------------------------------------
# read verilog
#---------------------------------------------------------------------------------------------------
read_verilog -container r -libname WORK -01 $FILELIST

#---------------------------------------------------------------------------------------------------
# set rtl top
#---------------------------------------------------------------------------------------------------
set_top r:/WORK/$RTL_TOP_FILE

#---------------------------------------------------------------------------------------------------
# read netlist
#---------------------------------------------------------------------------------------------------
read_verilog -container i -libname WORK   $NET_PATH/$RTL_TOP_FILE.v

#---------------------------------------------------------------------------------------------------
# read lib
#---------------------------------------------------------------------------------------------------
read_db [list $LIB_FILE]

#---------------------------------------------------------------------------------------------------
# set netlist top
#---------------------------------------------------------------------------------------------------
set_top i:/WORK/$NET_TOP_FILE

#---------------------------------------------------------------------------------------------------
# set fix value
#---------------------------------------------------------------------------------------------------
#set_constant i:/WORK/dac_top_0/pslverr 0
#set_constant i:/WORK/dac_top_0/pready  1

#---------------------------------------------------------------------------------------------------
# turn power gating on
#---------------------------------------------------------------------------------------------------
set verification_clock_gate_edge_analysis true

#---------------------------------------------------------------------------------------------------
# FM verify
#---------------------------------------------------------------------------------------------------
verify

#---------------------------------------------------------------------------------------------------
# Exit
#---------------------------------------------------------------------------------------------------
exit

